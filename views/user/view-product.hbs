<link rel="stylesheet" type="text/css" href="/public/stylesheets/pro.css" />

<section class="section-products">
  <div class="container">
    <div class="row justify-content-center text-center">
      <div class="col-md-8 col-lg-6">
        <div class="header">
          <h3>Featured Product</h3>
          <h2>Popular Products</h2>
        </div>
      </div>
    </div>
    <div class="row">
      <!-- Single Product -->
      {{#each product}}
        <div class="col-md-6 col-lg-4 col-xl-3">
          <div id="product-1" class="single-product">

            <div class="part-1">
              <img
                src="../../public/product-images/{{this.image}}"
                class="img-fluid"
                width="100%"
                height="100"
              />
              <ul>
                     <li><a onclick="addToWishlist('{{this._id}}')"><img
                      src="/public/product-images/heart.svg"
                      alt=""
                      width="30px"
                      height="25px"
                    /></a></li>
                     <li><a onclick="addToCart('{{this._id}}')">
                    <img
                      src="/public/product-images/cart.svg"
                      alt=""
                      class="first"
                      width="30px"
                      height=" 25px"
                    /></a></li> 

              </ul>
            </div>
            <div class="part-2">
              <h3 class="product-title"><b>{{this.product}}</b></h3>
              <h4 class="product-price">Rs.{{this.price}}</h4><br />
              <h4>{{this.Category}}</h4><br />
              <h4>{{this.author}}</h4>
            </div>
          </div>
        </div>
      {{/each}}
      <!-- Single Product -->

    </div>
  </div>
</section>
<script
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"
></script>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
  function addToCart(proId){
    $.ajax({
      url:'/add-to-cart/'+proId,
      method:'get',
      success:(response)=>{
        if(response.status){
           let  count=$('#cart-count').html()
            swal({
  title: "Good job!",
  text: "This product added to your cart",
  icon: "success",
  button: "Ok",
});
           count=parseInt(count)+1
           $("#cart-count").html(count)
        }
        
      }
    })

  }
</script>
<script>
  function addToWishlist(proId){
    $.ajax({
      url:'/add-to-wishlist/'+proId,
      method:'get',
      success:(response)=>{
        if(response.status){
           let  count=$('#wish-count').html()
           swal({
  title: "Good job!",
  text: "This product added to your wishlist",
  icon: "success",
  button: "Ok",
});
           count=parseInt(count)+1
           $("#wish-count").html(count)
        }
        
      }
    })

  }
</script>